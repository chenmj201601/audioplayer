/*! audioplayer - 1.0.0 2017-10-25 */

!function(e,t,a,i){var n=function(e){var t=e/3600,a=Math.floor(t),i=e%3600/60,n=Math.floor(i),o=Math.ceil(e%3600%60);return o>59&&(o=0,n=Math.ceil(i)),n>59&&(n=0,a=Math.ceil(t)),(0==a?"":a>0&&a.toString().length<2?"0"+a+":":a+":")+(n.toString().length<2?"0"+n:n)+":"+(o.toString().length<2?"0"+o:o)},o=function(e){var t=a.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/"+e.split(".").pop().toLowerCase()+";").replace(/no/,""))};e.fn.audioPlayer=function(a){var a=e.extend({classPrefix:"audioplayer",strPlay:"Play",strPause:"Pause",strVolume:"Volume",isTouch:!0},a),i={},d={playPause:"playpause",playing:"playing",stopped:"stopped",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",muted:"muted",mini:"mini"},l="ontouchstart"in t&&a.isTouch,u=l?"touchstart":"mousedown",s=l?"touchmove":"mousemove",r=l?"touchcancel":"mouseup";for(var v in d)i[v]=a.classPrefix+"-"+d[v];return this.each(function(){if("audio"!=e(this).prop("tagName").toLowerCase())return!1;var t=e(this),d=t.attr("src"),v=""===(v=t.get(0).getAttribute("autoplay"))||"autoplay"===v,m=""===(m=t.get(0).getAttribute("loop"))||"loop"===m,c=!1;void 0===d?t.find("source").each(function(){if(void 0!==(d=e(this).attr("src"))&&o(d))return c=!0,!1}):o(d)&&(c=!0);var h=e('<div class="'+a.classPrefix+'">'+(c?e("<div>").append(t.eq(0).clone()).html():'<embed src="'+d+'" width="0" height="0" volume="100" autostart="'+v.toString()+'" loop="'+m.toString()+'" />')+'<div class="'+i.playPause+'" title="'+a.strPlay+'"><a href="#">'+a.strPlay+"</a></div></div>"),f=(f=c?h.find("audio"):h.find("embed")).get(0);if(c){h.find("audio").css({width:0,height:0,visibility:"hidden"}),h.append('<div class="'+i.time+" "+i.timeCurrent+'"></div><div class="'+i.bar+'"><div class="'+i.barLoaded+'"></div><div class="'+i.barPlayed+'"></div></div><div class="'+i.time+" "+i.timeDuration+'"></div><div class="'+i.volume+'"><div class="'+i.volumeButton+'" title="'+a.strVolume+'"><a href="#">'+a.strVolume+'</a></div><div class="'+i.volumeAdjust+'"><div><div></div></div></div></div>');var p=h.find("."+i.bar),g=h.find("."+i.barPlayed),y=h.find("."+i.barLoaded),b=h.find("."+i.timeCurrent),P=h.find("."+i.timeDuration),C=h.find("."+i.volumeButton),E=h.find("."+i.volumeAdjust+" > div"),w=0,M=function(e){theRealEvent=l?e.originalEvent.touches[0]:e,f.currentTime=Math.round(f.duration*(theRealEvent.pageX-p.offset().left)/p.width())},L=function(e){theRealEvent=l?e.originalEvent.touches[0]:e,f.volume=Math.abs((theRealEvent.pageY-(E.offset().top+E.height()))/E.height())},T=function(){var e=setInterval(function(){if(f.buffered.length<1)return!0;y.width(f.buffered.end(0)/f.duration*100+"%"),Math.floor(f.buffered.end(0))>=Math.floor(f.duration)&&clearInterval(e)},100)},S=f.volume,V=f.volume=.111;Math.round(1e3*f.volume)/1e3==V?f.volume=S:h.addClass(i.noVolume),P.html("&hellip;"),b.html(n(0)),f.addEventListener("loadeddata",function(){T(),P.html(e.isNumeric(f.duration)?n(f.duration):"&hellip;"),E.find("div").height(100*f.volume+"%"),w=f.volume}),f.addEventListener("timeupdate",function(){b.html(n(f.currentTime)),g.width(f.currentTime/f.duration*100+"%")}),f.addEventListener("volumechange",function(){E.find("div").height(100*f.volume+"%"),f.volume>0&&h.hasClass(i.muted)&&h.removeClass(i.muted),f.volume<=0&&!h.hasClass(i.muted)&&h.addClass(i.muted)}),f.addEventListener("ended",function(){h.removeClass(i.playing).addClass(i.stopped)}),p.on(u,function(e){M(e),p.on(s,function(e){M(e)})}).on(r,function(){p.unbind(s)}),C.on("click",function(){return h.hasClass(i.muted)?(h.removeClass(i.muted),f.volume=w):(h.addClass(i.muted),w=f.volume,f.volume=0),!1}),E.on(u,function(e){L(e),E.on(s,function(e){L(e)})}).on(r,function(){E.unbind(s)})}else h.addClass(i.mini);h.addClass(v?i.playing:i.stopped),h.find("."+i.playPause).on("click",function(){return h.hasClass(i.playing)?(e(this).attr("title",a.strPlay).find("a").html(a.strPlay),h.removeClass(i.playing).addClass(i.stopped),c?f.pause():f.Stop()):(e(this).attr("title",a.strPause).find("a").html(a.strPause),h.addClass(i.playing).removeClass(i.stopped),c?f.play():f.Play()),!1}),t.replaceWith(h)}),this}}(jQuery,window,document);